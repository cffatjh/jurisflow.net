@model JurisFlowASP.ViewModels.ChangePasswordViewModel
@{
    ViewData["Title"] = "Şifre Değiştir";
}

<div class="row">
    <!-- Sidebar -->
    <div class="col-md-3">
        <div class="card shadow-sm">
            <div class="card-body p-0">
                <div class="list-group list-group-flush">
                    <a href="@Url.Action("Index", "Settings")" class="list-group-item list-group-item-action">
                        <i class="bi bi-person me-2"></i> Profil
                    </a>
                    <a href="@Url.Action("ChangePassword", "Settings")" class="list-group-item list-group-item-action active">
                        <i class="bi bi-key me-2"></i> Şifre Değiştir
                    </a>
                    <a href="@Url.Action("Notifications", "Settings")" class="list-group-item list-group-item-action">
                        <i class="bi bi-bell me-2"></i> Bildirimler
                    </a>
                    @if (User.IsInRole("Admin"))
                    {
                        <hr class="my-0">
                        <a href="@Url.Action("Users", "Settings")" class="list-group-item list-group-item-action">
                            <i class="bi bi-people me-2"></i> Kullanıcılar
                        </a>
                        <a href="@Url.Action("AuditLogs", "Settings")" class="list-group-item list-group-item-action">
                            <i class="bi bi-journal-text me-2"></i> Denetim Günlükleri
                        </a>
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="col-md-9">
        <div class="card shadow-sm">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="bi bi-key me-2"></i>Şifre Değiştir</h5>
            </div>
            <div class="card-body">
                <form asp-action="ChangePassword" method="post" style="max-width: 400px;">
                    @Html.AntiForgeryToken()

                    <div class="mb-3">
                        <label asp-for="CurrentPassword" class="form-label">Mevcut Şifre *</label>
                        <div class="input-group">
                            <input asp-for="CurrentPassword" type="password" class="form-control" id="currentPassword" />
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('currentPassword')">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                        <span asp-validation-for="CurrentPassword" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="NewPassword" class="form-label">Yeni Şifre *</label>
                        <div class="input-group">
                            <input asp-for="NewPassword" type="password" class="form-control" id="newPassword" />
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('newPassword')">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                        <span asp-validation-for="NewPassword" class="text-danger"></span>
                        <small class="text-muted">En az 6 karakter</small>
                    </div>

                    <div class="mb-4">
                        <label asp-for="ConfirmNewPassword" class="form-label">Yeni Şifre (Tekrar) *</label>
                        <div class="input-group">
                            <input asp-for="ConfirmNewPassword" type="password" class="form-control" id="confirmPassword" />
                            <button type="button" class="btn btn-outline-secondary" onclick="togglePassword('confirmPassword')">
                                <i class="bi bi-eye"></i>
                            </button>
                        </div>
                        <span asp-validation-for="ConfirmNewPassword" class="text-danger"></span>
                    </div>

                    <div class="d-flex gap-2">
                        <a href="@Url.Action("Index", "Settings")" class="btn btn-outline-secondary">İptal</a>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-lg me-1"></i> Şifreyi Güncelle
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>
function togglePassword(id) {
    const input = document.getElementById(id);
    input.type = input.type === 'password' ? 'text' : 'password';
}
</script>
}
